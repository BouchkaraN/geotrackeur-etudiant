<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Statistiques & Export</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <!-- Statistiques -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>ğŸ“Š Statistiques</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>
            <h3>Positions enregistrÃ©es</h3>
            <p>{{ statistics.totalPositions }} positions</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Positions avec photos</h3>
            <p>{{ statistics.withPhotos }} / {{ statistics.totalPositions }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>PrÃ©cision moyenne</h3>
            <p>{{ statistics.averageAccuracy | number:'1.0-0' }} mÃ¨tres</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <h3>Distance totale parcourue</h3>
            <p>{{ statistics.totalDistance | number:'1.2-2' }} km</p>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="statistics.firstDate">
          <ion-label>
            <h3>PremiÃ¨re position</h3>
            <p>{{ statistics.firstDate }}</p>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="statistics.lastDate">
          <ion-label>
            <h3>DerniÃ¨re position</h3>
            <p>{{ statistics.lastDate }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Export -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>ğŸ’¾ Exporter les donnÃ©es</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-button expand="block" (click)="exportToCSV()" [disabled]="positions.length === 0">
        ğŸ“„ Exporter en CSV
      </ion-button>
      <ion-button expand="block" (click)="exportToJSON()" [disabled]="positions.length === 0">
        ğŸ“‹ Exporter en JSON
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Gestion des donnÃ©es -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>ğŸ—‘ï¸ Gestion des donnÃ©es</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-button expand="block" color="danger" (click)="clearAllData()" [disabled]="positions.length === 0">
        âš ï¸ Supprimer toutes les donnÃ©es
      </ion-button>
      <ion-text color="medium">
        <p><small>Cette action supprimera dÃ©finitivement toutes les positions enregistrÃ©es.</small></p>
      </ion-text>
    </ion-card-content>
  </ion-card>

  <!-- Message si aucune donnÃ©e -->
  <ion-card *ngIf="positions.length === 0">
    <ion-card-content>
      <p style="text-align: center; color: gray;">
        Aucune position enregistrÃ©e.<br>
        Utilisez l'onglet "GÃ©olocalisation" pour commencer Ã  enregistrer vos positions.
      </p>
    </ion-card-content>
  </ion-card>
</ion-content>